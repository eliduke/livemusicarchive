<div class='inline-form'>
  <%= form_with(url: path, method: :get, local: true, class: "form-inline") do |form| %>
    <div class="form-group">
      <div class="input-group">
        <% if params[:q] %>
          <div class="input-group-addon">
            <%= link_to path do %>
              <%= icon('times') %>
            <% end %>
          </div>
        <% end %>

        <%=
          form.text_field :q,
          value: params[:q],
          type: 'search',
          class: "form-control input-md",
          size: "40",
          placeholder: "Search all #{path.split('/').last}"
        %>
        <div class="input-group-addon">
          <button type="submit" class="btn btn-xs btn-info">
            <%= icon('search') %>
          </button>
        </div>
      </div>
    </div>
  <% end %>
</div>